<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0,user-scalable=0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>京东</title>
    <link rel="stylesheet" href="./css/base.css">
    <link rel="stylesheet" href="./css/index.css">
</head>

<body>
    <div class="jd_layout">
        <!-- 搜索框 -->
        <div class="jd_search_arra">
            <div class="jd_logo"></div>
            <form action="" class="search_content">
                <input type="text" placeholder="请输入商品名">
            </form>
            <div class="jd_login">登录</div>
        </div>
        <!-- 轮播区域 -->
        <div class="jd_banner">
            <ul class="jd_banner_img">
                <li><a href="javascript:void(0);"><img src="./uploads/l1.jpg" alt=""></a></li>
                <li><a href="javascript:void(0);"><img src="./uploads/l2.jpg" alt=""></a></li>
                <li><a href="javascript:void(0);"><img src="./uploads/l3.jpg" alt=""></a></li>
                <li><a href="javascript:void(0);"><img src="./uploads/l4.jpg" alt=""></a></li>
                <li><a href="javascript:void(0);"><img src="./uploads/l5.jpg" alt=""></a></li>
                <li><a href="javascript:void(0);"><img src="./uploads/l6.jpg" alt=""></a></li>
                <li><a href="javascript:void(0);"><img src="./uploads/l7.jpg" alt=""></a></li>
                <li><a href="javascript:void(0);"><img src="./uploads/l8.jpg" alt=""></a></li>
            </ul>
            <ul class="jd_banner_flag">
                <li class="current"></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
            </ul>
        </div>
        <!-- 导航区域 -->
        <div class="jd_nav">
            <ul class="clearfix">
                <li><a href="javascript:void(0)"><img src="./images/nav_1.png" alt=""></a>
                    <p>商品分类</p>
                </li>
                <li><a href="javascript:void(0)"><img src="./images/nav_2.png" alt=""></a>
                    <p>商品分类</p>
                </li>
                <li><a href="javascript:void(0)"><img src="./images/nav_3.png" alt=""></a>
                    <p>商品分类</p>
                </li>
                <li><a href="javascript:void(0)"><img src="./images/nav_4.png" alt=""></a>
                    <p>商品分类</p>
                </li>
                <li><a href="javascript:void(0)"><img src="./images/nav_5.png" alt=""></a>
                    <p>商品分类</p>
                </li>
                <li><a href="javascript:void(0)"><img src="./images/nav_6.png" alt=""></a>
                    <p>商品分类</p>
                </li>
                <li><a href="javascript:void(0)"><img src="./images/nav_7.png" alt=""></a>
                    <p>商品分类</p>
                </li>
                <li><a href="javascript:void(0)"><img src="./images/nav_8.png" alt=""></a>
                    <p>商品分类</p>
                </li>
            </ul>

        </div>
        <!-- 产品信息区域 -->
        <div class="jd_productinfo">
            <div class="jd_sk_box">
                <div class="jd_sk_tit clearfix">
                    <div class="jd_sk_timer f_left">
                        <span class="jd_sk_icon"></span>
                        <span class="jd_sk_text">掌上秒杀</span>
                        <span class="jd_sk_countTime">0</span>
                        <span class="jd_sk_countTime">0</span>
                        <span class="jd_sk_countTime back_none ">:</span>
                        <span class="jd_sk_countTime">0</span>
                        <span class="jd_sk_countTime">0</span>
                        <span class="jd_sk_countTime back_none ">:</span>
                        <span class="jd_sk_countTime">0</span>
                        <span class="jd_sk_countTime">0</span>
                    </div>
                    <div class="jd_sk_more f_right">
                        更多内容...
                    </div>
                </div>
                <div class="jd_sk_content">
                    <ul class="clearfix">
                        <li class="jd_sk_content_items"><a href="javascript:void(0);"><img src="./uploads/detail01.jpg"
                                    alt=""></a>
                            <p class="text-line ">￥10.00</p>
                            <p>￥20.00</p>
                        </li>
                        <li class="jd_sk_content_items"><a href="javascript:void(0);"><img src="./uploads/detail01.jpg"
                                    alt=""></a>
                            <p class="text-line ">￥10.00</p>
                            <p>￥20.00</p>
                        </li>
                        <li class="jd_sk_content_items"><a href="javascript:void(0);"><img src="./uploads/detail01.jpg"
                                    alt=""></a>
                            <p class="text-line ">￥10.00</p>
                            <p>￥20.00</p>
                        </li>
                    </ul>
                </div>
            </div>

            <div class="jd_productBox">
                <div class="jd_productBox_title">
                    <h3>京东超市</h3>
                </div>
                <div class="jd_productBox_content a_width_50 clearfix">
                    <a href="javascript:;" class=" f_left"><img src="./uploads/cp1.jpg" alt=""></a>
                    <a href="javascript:;" class=" f_left border_left border_bottom"><img src="./uploads/cp2.jpg"
                            alt=""></a>
                    <a href="javascript:;" class=" f_left border_left border_bottom"><img src="./uploads/cp3.jpg"
                            alt=""></a>
                </div>
            </div>


        </div>
    </div>
    <script src="./zepto-master/src/zepto.min.js"></script>
    <script src="./zepto-master/src/selector.js"></script>
    <script src="./zepto-master/src/fx.js"></script>
    <script>
        // 1.修改轮播结构
        $(function () {
            var banner = $(".jd_banner");
            var bannerWidth = banner.width();
            // 轮播中最重要的序号
            var index = 1;
            //获得标点
            var flags = banner.find("ul:last-of-type");
            // zepto里面的功能是分模块的，所以我们需要引入selector.js
            var imgBox = banner.find("ul:first-of-type");
            var first = imgBox.find("li:first-of-type");
            var last = imgBox.find("li:last-of-type");
            // 插入最后一张和第一张
            imgBox.append(first.clone());
            last.clone().insertBefore(first);
            // 修改样式
            var count = imgBox.children().length;
            imgBox.width(count * bannerWidth);
            imgBox.children().width(bannerWidth);
            // 让ul（imgBox）有个默认的偏移。
            imgBox.css("left", -bannerWidth);

            // 当浏览器发生拖拽时，从新计算ul和li的大小。
            window.onresize = function () {
                bannerWidth = banner.width();
                console.log(bannerWidth);
                imgBox.width(count * bannerWidth);
                imgBox.children().width(bannerWidth);
                // 让ul（imgBox）有个默认的偏移。
                imgBox.css("left", -index * bannerWidth);
            }

            // 2.自动轮播
            setInterval(function () {
                index++;
                // 给imgBOX添加a过渡效果，通过zepto的animate方法。
                imgBox.animate({ "left": -index * bannerWidth }, 500, "ease", function () {
                    // 过渡效果执行完毕后
                    // 如果为最后一张图片（count-1），需要切换到第一张图片.
                    if (index === count - 1) {
                        index = 1;
                        imgBox.css("left", -index * bannerWidth);
                    } else if (index === 0) {
                        // 如果是第一个元素需要切换到，倒是第二张图片
                        index = count - 2;
                        imgBox.css("left", -index * bannerWidth);
                    }
                flags.children().removeClass("current").eq(index - 1).addClass("current");
                });
            }, 2000);

            // 3.手动轮播
            


        });


    </script>
</body>

</html>